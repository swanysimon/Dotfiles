# tmux.conf
# Simon Swanson
# I take no reponsibility for you harming yourself or your computer trying to use this configuration file

# clear all bindings so I can make my own
# easily the most dangerous part of the process
unbind -a

# prefix to CTRL-U
set -g   prefix C-u
bind C-u send-prefix
bind :   command-prompt


####
#### panes
####

# pane navigation
bind h selectp -L
bind j selectp -D
bind k selectp -U
bind l selectp -R
bind r rotatew -D
bind R rotatew -U

# pane modification
# "smart" splitting calibrated for 14 point Menlo font on a 16:10 display - do some math to figure out your numbers
bind b   breakp
bind t   if                "[[ 0 -gt $((8*#{pane_width}-18*#{pane_height})) ]]" "splitw -c '#{pane_current_path}'" "splitw -h -c '#{pane_current_path}'"
bind C-t command-prompt -p "Open new pane with command:" "if \"[[ 0 -gt $((8*#{pane_width}-18*#{pane_height})) ]]\" \"splitw -c '#{pane_current_path}' '%1'\" \"splitw -h -c '#{pane_current_path}' '%1'\""
bind C-x confirm -p        "Close pane #P? (y/n)" killp
bind -   splitw
bind |   splitw  -h

#### panes


####
#### windows
####

# window navigation
bind [   selectw        -p
bind ]   selectw        -n
bind '#' command-prompt -p "Switch to window:" "selectw -t '%1'"

# window modifications
bind n   neww           -c "#{pane_current_path}"     -a
bind C-n command-prompt -p "New window with command:" "neww -c '#{pane_current_path}' '%1' \; renamew '%1'"
bind C-r command-prompt -p 'Rename window "#W":'      "renamew '%1'"
bind C-w confirm        -p 'Close window "#W"? (y/n)' killw
bind <   swapw -t -1
bind >   swapw -t +1

#### windows


####
#### sessions
####

# TODO: good way of prompting session switch
bind d   detach
bind D   detach  -a
bind C-q confirm -p 'Quit session "#S"? (y/n)' kill-session
bind {   switchc -p
bind }   switchc -n

#### sessions


####
#### copy-mode
####

# vi > emacs
setw -g mode-keys   vi
set  -g status-keys vi

# copy to/from OS X clipboard
bind            /   copy-mode -e
bind -t vi-copy v   begin-selection
bind -t vi-copy C-v rectangle-toggle
bind -t vi-copy y   copy-pipe        "pbcopy && tmux deleteb"

# page up/down navigate copy mode
bind -n         PPage if -F     "#{alternate_on}" "send PPage" "copy-mode -e; send PPage"
bind -t vi-copy NPage page-down
bind -t vi-copy PPage page-up

#### copy-mode


####
#### mouse
####

set -g -q mouse on

# scroll for copy-mode
bind -n         WheelDownPane if -F -t= "#{alternate_on}" "send -M"    "selectp -t=; copy-mode -e; send -M"
bind -n         WheelUpPane   if -F -t= "#{alternate_on}" "send -M"    "selectp -t=; copy-mode -e; send -M"
bind -t vi-copy WheelDownPane scroll-down
bind -t vi-copy WheelUpPane   scroll-up

#### mouse


####
#### terminal
####

# opens tmux with native clipboard and application support
set -g    default-command   "reattach-to-user-namespace -l bash"
set -g    default-terminal  "xterm-256color"
set -g    history-limit     30000
set -g    set-titles        on
set -g    set-titles-string "Yes, Master?"

# window sanity settings
setw -g aggressive-resize off
set  -g base-index        1
set  -g bell-action       any
setw -g pane-base-index   1
set  -g renumber-windows  on

# command timeouts
set -sg escape-time 0
set -g  repeat-time 0
#### terminal


####
#### status bar
####

# status bar configuration
set  -g message-command-style         fg=brightblack,bg=white
set  -g message-style                 fg=brightblack,bg=white
setw -g monitor-activity              on
set  -g status                        on
set  -g status-interval               1
set  -g status-justify                left
set  -g status-left                   "[#S] "
set  -g status-left-length            100
set  -g status-position               bottom
set  -g status-right                  "[#h]"
set  -g status-right-length           100
set  -g status-style                  fg=brightred,bg=brightblack
set  -g visual-activity               off
setw -g window-status-activity-attr   none
setw -g window-status-current-format  "[#W]"
setw -g window-status-current-style   fg=yellow,bg=brightblack
setw -g window-status-format          "(#W#F)"
setw -g window-status-style           fg=brightmagenta,bg=brightblack

#### status bar

